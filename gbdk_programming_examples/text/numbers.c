
#include <gb/gb.h>

unsigned char nmap[] =
{
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0C,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,
  0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A
};

/* Start of tile array. */
unsigned char base10[] =
{
  0x18,0x18,0x24,0x24,0x24,0x24,0x24,0x24,
  0x24,0x24,0x24,0x24,0x24,0x24,0x18,0x18,
  0x18,0x18,0x08,0x08,0x08,0x08,0x08,0x08,
  0x08,0x08,0x08,0x08,0x08,0x08,0x3C,0x3C,
  0x3C,0x3C,0x04,0x04,0x04,0x04,0x04,0x04,
  0x3C,0x3C,0x20,0x20,0x20,0x20,0x3C,0x3C,
  0x18,0x18,0x24,0x24,0x04,0x04,0x04,0x04,
  0x08,0x08,0x04,0x04,0x24,0x24,0x18,0x18,
  0x20,0x20,0x20,0x20,0x28,0x28,0x28,0x28,
  0x28,0x28,0x3C,0x3C,0x08,0x08,0x08,0x08,
  0x3C,0x3C,0x20,0x20,0x20,0x20,0x20,0x20,
  0x3C,0x3C,0x04,0x04,0x04,0x04,0x3C,0x3C,
  0x3C,0x3C,0x20,0x20,0x20,0x20,0x20,0x20,
  0x3C,0x3C,0x24,0x24,0x24,0x24,0x3C,0x3C,
  0x3C,0x3C,0x04,0x04,0x04,0x04,0x08,0x08,
  0x08,0x08,0x08,0x08,0x10,0x10,0x10,0x10,
  0x18,0x18,0x24,0x24,0x24,0x24,0x24,0x24,
  0x18,0x18,0x24,0x24,0x24,0x24,0x18,0x18,
  0x3C,0x3C,0x24,0x24,0x24,0x24,0x24,0x24,
  0x3C,0x3C,0x04,0x04,0x04,0x04,0x04,0x04,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};

void main() {
	UINT8 digits[20] = {0};
	UINT8 digit = 20;
	UINT8 * digitp = NULL;
	UINT8 c;
	
	DISPLAY_OFF;
	disable_interrupts();

	set_bkg_data(0, 10, base10);
	set_bkg_tiles(0,0, 20,18, nmap);

	enable_interrupts();
	DISPLAY_ON;
	SHOW_BKG;

	while (1) {
		for (digit = 20; digit != 0; digit--) {
			digitp = &digits[digit];
			set_bkg_tiles(digit, 0, 1,1, digitp);
		}
		for (c = 19; c != 1; c--) {
			if (c == 19) {
				digits[19]++;
			}
			if (digits[c] == 10) {
				digits[c-1] += 1;
				digits[c] = 0;
			}
		}
		//wait_vbl_done();
	}
}