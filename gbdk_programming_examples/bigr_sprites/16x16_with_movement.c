
#include <gb/gb.h>
// works but possibly wait_vbl_done not in right place?
unsigned char ship[] =
{
  0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,
  0x01,0x01,0x02,0x03,0x42,0x43,0x44,0x46,
  0xC4,0xC6,0xC8,0xCC,0xD7,0xD8,0xEF,0xF0,
  0xDF,0xE0,0x80,0xFF,0xFF,0xFF,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,
  0x80,0x80,0x40,0xC0,0x42,0xC2,0x22,0x62,
  0x22,0x62,0x13,0x33,0xEB,0x1B,0xF7,0x0F,
  0xFB,0x07,0x01,0xFF,0xFF,0xFF,0x00,0x00
};


UINT8 shipx = 80;
UINT8 shipy = 72;
void mship() {
  if (joypad() & J_UP) {
    shipy--;
  }
  if (joypad() & J_DOWN) {
    shipy++;
  }
  if (joypad() & J_LEFT) {
    shipx--;
  }
  if (joypad() & J_RIGHT) {
    shipx++;
  }

  set_sprite_tile(0,0);
  move_sprite(0,shipx,shipy);
  set_sprite_tile(1,2);
  move_sprite(1,shipx+8,shipy);
}

void main() {
  SPRITES_8x16;
  set_sprite_data(0,4,ship);
  SHOW_SPRITES;
  DISPLAY_ON;
  while(1) {
    mship();
    delay(5); // delay then wait_vbl_done
    wait_vbl_done();
  }
}